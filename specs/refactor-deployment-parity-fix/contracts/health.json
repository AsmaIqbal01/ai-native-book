{
  "openapi": "3.1.0",
  "info": {
    "title": "Health Check API",
    "description": "Endpoint for checking system health and service availability",
    "version": "1.0.0"
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "Health check",
        "description": "Returns the health status of the RAG backend and its dependencies (Qdrant, embedding API)",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "Health check completed (may return 'degraded' or 'error' status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                },
                "examples": {
                  "healthy": {
                    "summary": "All services operational",
                    "value": {
                      "status": "ok",
                      "qdrant_connected": true,
                      "embedding_api_available": true,
                      "timestamp": "2025-12-25T12:34:56.789Z"
                    }
                  },
                  "degraded": {
                    "summary": "Some services unavailable",
                    "value": {
                      "status": "degraded",
                      "qdrant_connected": true,
                      "embedding_api_available": false,
                      "timestamp": "2025-12-25T12:34:56.789Z"
                    }
                  },
                  "error": {
                    "summary": "Critical services unavailable",
                    "value": {
                      "status": "error",
                      "qdrant_connected": false,
                      "embedding_api_available": false,
                      "timestamp": "2025-12-25T12:34:56.789Z"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": ["Health"]
      }
    }
  },
  "components": {
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "required": ["status", "qdrant_connected", "embedding_api_available", "timestamp"],
        "properties": {
          "status": {
            "type": "string",
            "enum": ["ok", "degraded", "error"],
            "description": "Overall system status:\n- `ok`: All services operational\n- `degraded`: Some services unavailable (queries may fail)\n- `error`: Critical services unavailable (system inoperable)"
          },
          "qdrant_connected": {
            "type": "boolean",
            "description": "Whether Qdrant vector database is connected and responsive"
          },
          "embedding_api_available": {
            "type": "boolean",
            "description": "Whether embedding API (OpenAI/Cohere) is accessible"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of the health check"
          }
        }
      }
    }
  }
}
